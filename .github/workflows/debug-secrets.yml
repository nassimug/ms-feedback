name: Debug Secrets

on:
  workflow_dispatch:

jobs:
  debug:
    runs-on: ubuntu-latest
    steps:
      - name: Vérifier les secrets OCI
        run: |
          echo "Vérification des secrets..."
          
          if [ -z "${{ secrets.OCI_USERNAME }}" ]; then
            echo "❌ OCI_USERNAME est vide ou non défini"
          else
            echo "✅ OCI_USERNAME est défini"
            echo "Valeur (masquée): ***${OCI_USERNAME:(-4)}"
          fi
          
          if [ -z "${{ secrets.OCI_AUTH_TOKEN }}" ]; then
            echo "❌ OCI_AUTH_TOKEN est vide ou non défini"
          else
            echo "✅ OCI_AUTH_TOKEN est défini"
          fi
          
          if [ -z "${{ secrets.OCI_TENANCY_NAMESPACE }}" ]; then
            echo "❌ OCI_TENANCY_NAMESPACE est vide ou non défini"
          else
            echo "✅ OCI_TENANCY_NAMESPACE est défini: ${{ secrets.OCI_TENANCY_NAMESPACE }}"
          fi
          
          if [ -z "${{ secrets.OCI_KUBECONFIG }}" ]; then
            echo "❌ OCI_KUBECONFIG est vide ou non défini"
          else
            echo "✅ OCI_KUBECONFIG est défini"
          fi
          
          echo ""
          echo "Tous les secrets requis doivent être définis pour que la pipeline fonctionne."
        env:
          OCI_USERNAME: ${{ secrets.OCI_USERNAME }}

